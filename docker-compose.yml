version: '3.8'

services:
  ekphos:
    image: ekphos-ssh:latest
    # Uncomment to build locally instead:
    # build:
    #   context: .
    #   dockerfile: Dockerfile
    container_name: ekphos
    ports:
      - "22:22"  # Map host port 2222 to container port 22
    volumes:
      - ./config/authorized_keys:/config/authorized_keys:ro  # Mount authorized_keys as read-only
      - ./data:/data  # Persist data directory
      - ./themes:/app/themes:ro  # Optional: override bundled themes
    environment:
      - RUST_LOG=info
    restart: unless-stopped
    networks:
      - ekphos-network

networks:
  ekphos-network:
    driver: bridge
